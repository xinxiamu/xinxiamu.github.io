<!DOCTYPE html><html lang="zh-CN"><head><meta name="generator" content="Hexo 3.8.0"><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="技术博客"><title>docker学习-第三课：镜像 | 小木</title><link rel="stylesheet" type="text/css" href="//fonts.proxy.ustclug.org/css?family=Source+Code+Pro"><link rel="stylesheet" type="text/css" href="/css/style.css?v=2.0.1"><link rel="stylesheet" type="text/css" href="/css/highlight.css?v=2.0.1"><link rel="Shortcut Icon" href="/favicon.ico"><link rel="bookmark" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">docker学习-第三课：镜像</h1><a id="logo" href="/.">小木</a><p class="description">专注、忍耐、坚定、从容!!! 乌龟快跑……</p></div><div id="nav-menu"><a href="/." class="current"><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/about/"><i class="fa fa-user"> 关于</i></a><a href="/atom.xml"><i class="fa fa-rss"> 订阅</i></a></div><div id="search-form"><div id="result-mask" class="hide"></div><label><input id="search-key" type="text" autocomplete="off" placeholder="Arama"></label><div id="result-wrap" class="hide"><div id="search-result"></div></div><div class="hide"><template id="search-tpl"><div class="item"><a href="/{path}" title="{title}"><div class="title">{title}</div><div class="time">{date}</div><div class="tags">{tags}</div></a></div></template></div></div></div><div id="layout" class="layout-g"><div class="layout-l"><div class="content_container"><div class="post"><h1 class="post-title">docker学习-第三课：镜像</h1><div class="post-meta"><a href="/2018/02/02/docker-lesson3-images/#comments" class="comment-count"></a><p><span class="date">Feb 02, 2018</span><span><a href="/categories/docker/" class="category">docker</a></span><span><i id="busuanzi_container_page_pv"><i id="busuanzi_value_page_pv"></i><i>点击</i></i></span></p></div><div class="post-content"><p>Docker    运行容器前需要本地存在对应的镜像,如果镜像不存在本地,Docker    会从镜像仓库下载(默认是<br>Docker    Hub    公共注册服务器中的仓库)。</p>
<p>本章将介绍更多关于镜像的内容,包括:</p>
<ul>
<li>从仓库获取镜像;</li>
<li>管理本地主机上的镜像;</li>
<li>介绍镜像实现的基本原理。</li>
</ul>
<h2 id="获取镜像"><a href="#获取镜像" class="headerlink" title="获取镜像"></a>获取镜像</h2><p>在官方<a href="https://hub.docker.com/explore/" target="_blank" rel="noopener">Docker Hub</a>有大量高质量可用镜像。下面我们来看怎样获取这些镜像。</p>
<p>从Docker    镜像仓库获取镜像的命令是docker    pull。其命令格式为: </p>
<pre><code>docker pull    [选项] [Docker Registry 地址[:端口号]/]仓库名[:标签]
</code></pre><p>具体的先选可以通过<code>docker pull    --help</code>命令查看。镜像名称的格式：</p>
<ul>
<li>Docker 镜像仓库地址:地址的格式一般是<code>&lt;域名/IP&gt;[:端口号]</code>。默认地址是Docker Hub。</li>
<li>仓库名:如之前所说,这里的仓库名是两段式名称,即<code>&lt;用户名&gt;/&lt;软件名&gt;</code>。对于Docker Hub,如果不给出用户名,则默认为library,也就是官方镜像。</li>
</ul>
<p>比如:</p>
<pre><code>$    docker    pull    ubuntu:16.04
16.04:    Pulling    from    library/ubuntu
bf5d46315322:    Pull    complete
9f13e0ac480c:    Pull    complete
e8988b5b3097:    Pull    complete
40af181810e7:    Pull    complete
e6f7c7e5c03e:    Pull    complete
Digest:    sha256:147913621d9cdea08853f6ba9116c2e27a3ceffecf3b492983ae97c3d643fbbe
Status:    Downloaded    newer    image    for    ubuntu:16.04
</code></pre><p>上面的命令中没有给出Docker镜像仓库地址,因此将会从Docker Hub获取镜像。而镜像名称是ubuntu:16.04    ,因此将会获取官方镜像library/ubuntu    仓库中标签为16.04的镜像。    </p>
<p>例子： </p>
<pre><code>mutian@mutian-ThinkPad-T440p:~$ sudo docker pull centos
[sudo] password for mutian: 
Using default tag: latest
latest: Pulling from library/centos
af4b0a2388c6: Pull complete 
Digest: sha256:6247c7082d4c86c61b00f7f2e3edbf7f072a24aa8edc28b5b68b3de3101bc1ce
Status: Downloaded newer image for centos:latest
mutian@mutian-ThinkPad-T440p:~$ 
</code></pre><h2 id="运行"><a href="#运行" class="headerlink" title="运行"></a>运行</h2><p>有了镜像后,我们就能够以这个镜像为基础启动并运行一个容器。以上面的为例,如果我们打算启动里面的bash并且进行交互式操作的话,可以执行下面的命令。</p>
<p><code>sudo docker run -it --rm centos bash</code></p>
<pre><code>[root@5f6c0a6b41c1 ~]# cat /etc/os-release 
NAME=&quot;CentOS Linux&quot;
VERSION=&quot;7 (Core)&quot;
ID=&quot;centos&quot;
ID_LIKE=&quot;rhel fedora&quot;
VERSION_ID=&quot;7&quot;
PRETTY_NAME=&quot;CentOS Linux 7 (Core)&quot;
ANSI_COLOR=&quot;0;31&quot;
CPE_NAME=&quot;cpe:/o:centos:centos:7&quot;
HOME_URL=&quot;https://www.centos.org/&quot;
BUG_REPORT_URL=&quot;https://bugs.centos.org/&quot;

CENTOS_MANTISBT_PROJECT=&quot;CentOS-7&quot;
CENTOS_MANTISBT_PROJECT_VERSION=&quot;7&quot;
REDHAT_SUPPORT_PRODUCT=&quot;centos&quot;
REDHAT_SUPPORT_PRODUCT_VERSION=&quot;7&quot;

[root@5f6c0a6b41c1 ~]# 
</code></pre><p>通过上面信息我们可以看到容器内系统信息。</p>
<p>命令说明：</p>
<p><code>docker    run</code>就是运行容器的命令,具体格式我们会在    容器    一节进行详细讲解,我们这里简要的说明一下上面用到的参数。</p>
<ul>
<li><code>-it</code>:这是两个参数,一个是<code>-i</code>:交互式操作,一个是<code>-t</code>终端。我们这里打算进入<code>bash</code>执行一些命令并查看返回结果,因此我们需要交互式终端。</li>
<li><code>--rm</code>:这个参数是说容器退出后随之将其删除。默认情况下,为了排障需求,退出的容器并不会立即删除,除非手动<code>docker    rm</code>。我们这里只是随便执行个命令,看看结果,不需要排障和保留结果,因此使用<code>--rm</code>可以避免浪费空间。</li>
<li><code>centos</code>:这是指用<code>centos</code>镜像为基础来启动容器。</li>
<li><code>bash</code>:放在镜像名后的是命令,这里我们希望有个交互式<code>Shell</code>,因此用的是<code>bash</code>。</li>
</ul>
<p>进入系统后我们可以执行任何linux下的命令。</p>
<p>最后我们通过<code>exit</code>退出了这个容器。<br>退出后，之前操作的所有内容将删除，重新进入系统，已经看不到。因为加了<code>--rm</code>命令。</p>
<h2 id="列出所有的镜像"><a href="#列出所有的镜像" class="headerlink" title="列出所有的镜像"></a>列出所有的镜像</h2><p>想列出所有已经下载的镜像，可以使用命令<code>docker    image ls</code></p>
<pre><code>mutian@mutian-ThinkPad-T440p:~$ sudo docker image ls
[sudo] password for mutian: 
REPOSITORY          TAG                 IMAGE ID            CREATED             SIZE
centos              latest              ff426288ea90        7 weeks ago         207MB
hello-world         latest              f2a91732366c        3 months ago        1.85kB
</code></pre><p>上面列表包含了<code>仓库名</code>、<code>标签</code>、<code>镜像ID</code>、<code>创建时间</code>以及所占用空间。<br>镜像    ID    则是镜像的唯一标识,一个镜像可以对应多个标签。</p>
<ul>
<li>镜像体积SIZE：<br>上面个看到的镜像体积可能比Docker Hub上的大，因为Docker Hub上的是压缩的，本地的是解压后的。所有镜像的总体积会比<br>每个加起来的小，因为镜像是分层存储的，有些镜像共用相同部分。</li>
</ul>
<p>你可以通过以下命令来便捷的查看镜像、容器、数据卷所占用的空间。</p>
<pre><code>mutian@mutian-ThinkPad-T440p:~$ sudo docker system df
TYPE                TOTAL               ACTIVE              SIZE                RECLAIMABLE
Images              2                   1                   207.2MB             207.2MB (99%)
Containers          1                   0                   0B                  0B
Local Volumes       0                   0                   0B                  0B
Build Cache 
</code></pre><ul>
<li>虚悬镜像</li>
</ul>
<img src="/2018/02/02/docker-lesson3-images/a.png">
<p>如上图，命令查出来的就是虚悬镜像。其产生的原因是：<br>由于新旧镜像同名,旧镜像名称被取消,从而出现仓库名、标签均为<none>的镜像。</none></p>
<p>这种镜像已经失去了存在的意义，是可以删除的，可以用下面命令删除：</p>
<pre><code>$ sudo docker image    prune
</code></pre><ul>
<li>中间层镜像<br>为了加速镜像构建、重复利用资源,Docker会利用中间层镜像。所以在使用一段时间后,可<br>能会看到一些依赖的中间层镜像。默认的<code>docker image    ls</code>列表中只会显示顶层镜像,如果<br>希望显示包括中间层镜像在内的所有镜像的话,需要加    <code>-a</code>参数。</li>
</ul>
<pre><code>$ sudo docker image ls -a
</code></pre><p>这样会看到很多无标签的镜像,与之前的虚悬镜像不同,这些无标签的镜像很多都是中间层镜像,是其它镜像所依赖的镜像。这些无标签镜像不应该删除,否则会导致上层镜像因为依赖丢失而出错。实际上,这些镜像也没必要删除,因为之前说过,相同的层只会存一遍,而这些镜像是别的镜像的依赖,因此并不会因为它们被列出来而多存了一份,无论如何你也会需要它们。只要删除那些依赖它们的镜像后,这些依赖的中间层镜像也会被连带删除。 </p>
<ul>
<li>列出部分镜像<br>上面查看的是全部镜像，有的时候我们只是需要查看需要查看的镜像。</li>
</ul>
<p>根据仓库名称列出镜像：</p>
<pre><code>sudo docker image ls centos
REPOSITORY          TAG                 IMAGE ID            CREATED             SIZE
centos              latest              ff426288ea90        7 weeks ago         207MB
</code></pre><p>列出特定的某个镜像,也就是说指定仓库名和标签</p>
<img src="/2018/02/02/docker-lesson3-images/b.png">
<p>过滤查找镜像，使用<code>--filter</code>。具体使用请百度。</p>
<ul>
<li>以特定格式显示</li>
</ul>
<p>只显示ID列：</p>
<pre><code>sudo docker image ls -q
ff426288ea90
f2a91732366c
</code></pre><p>用go模板语法定制格式显示<br>比如,下面的命令会直接列出镜像结果,并且只包含镜像ID和仓库名:</p>
<pre><code>mutian@mutian-ThinkPad-T440p:~$ sudo docker image ls --format &quot;{{.ID}}:{{.Repository}}&quot;
ff426288ea90:centos
f2a91732366c:hello-world
</code></pre><p>或者打算以表格等距显示,并且有标题行,和默认一样,不过自己定义列:</p>
<pre><code>mutian@mutian-ThinkPad-T440p:~$ sudo docker image ls --format &quot;table{{.ID}}\t{{.Repository}}\t{{.Tag}}&quot;
IMAGE ID            REPOSITORY          TAG
ff426288ea90        centos              latest
f2a91732366c        hello-world         latest
</code></pre><h2 id="删除本地镜像"><a href="#删除本地镜像" class="headerlink" title="删除本地镜像"></a>删除本地镜像</h2><p>可以使用<code>docker    image    rm</code>命令来删除本地镜像。格式如下：</p>
<pre><code>$    docker image rm [选项] &lt;镜像1&gt; [&lt;镜像2&gt; ...]
</code></pre><ul>
<li>用    ID、镜像名、摘要删除镜像</li>
</ul>
<pre><code>mutian@mutian-ThinkPad-T440p:~$ sudo docker image ls
REPOSITORY          TAG                 IMAGE ID            CREATED             SIZE
nginx               latest              e548f1a579cf        7 days ago          109MB
centos              latest              ff426288ea90        7 weeks ago         207MB
hello-world         latest        

#删除hello-world，段id，id一部分，能区分就行。
mutian@mutian-ThinkPad-T440p:~$ sudo docker rm f2a91
</code></pre><p>用仓库名删除：</p>
<pre><code>$ sudo docker image    rm    hello-world    
</code></pre><p>当然,更精确的是使用镜像摘要删除镜像。</p>
<pre><code>mutian@mutian-ThinkPad-T440p:~$ sudo docker image ls --digests
</code></pre><ul>
<li>用    <code>docker    image    ls</code>命令来配合</li>
</ul>
<p>比如,我们需要删除所有仓库名为redis的镜像:</p>
<pre><code>$ docker image rm $(docker image ls -q redis)
</code></pre><h2 id="利用commit理解镜像构成"><a href="#利用commit理解镜像构成" class="headerlink" title="利用commit理解镜像构成"></a>利用commit理解镜像构成</h2><p>镜像是一层一层构成的。</p>
<p>现在让我们以定制一个Web    服务器为例子,来讲解镜像是如何构建的。</p>
<pre><code>docker run --name webserver -d -p 80:80 nginx
</code></pre><p>在浏览器可查看：</p>
<img src="/2018/02/02/docker-lesson3-images/c.png">
<p>现在,假设我们非常不喜欢这个欢迎页面,我们希望改成欢迎    Docker的文字,我们可以使用<code>docker    exec</code>命令进入容器,修改其内容 </p>
<pre><code>&gt; sudo docker exec -it webserver bash
root@3729b97e8226:/# echo &apos;&lt;h1&gt;Hello,Docker!&lt;/h1&gt;&apos; &gt;    /usr/share/nginx/html/index.html
root@3729b97e8226:/#    exit
</code></pre><p>然后刷新浏览器，就可以看到更改了。</p>
<p>我们修改了容器的文件,也就是改动了容器的存储层。我们可以通过<code>docker    diff</code>命令看到具体的改动。</p>
<p>下面我们可以用下面的命令将容器保存为镜像：</p>
<pre><code>mutian@mutian-ThinkPad-T440p:~$ sudo docker commit \
&gt; --author &quot;zmt&quot; \
&gt; --message &quot;修改了默认页面&quot; \
&gt; webserver \
&gt; nginx:v2
sha256:e8023c09eed50cf1dead0b2e9da1f8e324db7f1adf7fbb042371b0503ccd71c3

#查看
mutian@mutian-ThinkPad-T440p:~$ sudo docker image ls
REPOSITORY          TAG                 IMAGE ID            CREATED             SIZE
nginx               v2                  e8023c09eed5        8 seconds ago       109MB
nginx               latest              e548f1a579cf        7 days ago          109MB
centos              latest              ff426288ea90        7 weeks ago         207MB
hello-world         latest  
</code></pre><p>查看镜像内历史记录：</p>
<pre><code>$ docker history nginx:v2
</code></pre><p>新的镜像定制好后,我们可以来运行这个镜像。</p>
<pre><code>mutian@mutian-ThinkPad-T440p:~$ sudo docker run --name web2 -d -p 81:80 nginx:v2
</code></pre><p>在浏览器查看：<a href="http://localhost:81/" target="_blank" rel="noopener">http://localhost:81/</a></p>
<p>停止容器：<code>sudo docker kill --signal=SIGINT web2</code></p>
<p>至此,我们第一次完成了定制镜像,使用的是<code>docker    commit</code>命令,手动操作给旧的镜像添加了新的一层,形成新的镜像,对镜像多层存储应该有了更直观的感觉。</p>
<blockquote>
<p>注意：通常不会使用<code>docker commit</code>来创建镜像，这样容易导致镜像臃肿。另外也无法知道每次更改，变成黑箱操作。</p>
</blockquote>
<h2 id="使用Dockerfile定制镜像"><a href="#使用Dockerfile定制镜像" class="headerlink" title="使用Dockerfile定制镜像"></a>使用Dockerfile定制镜像</h2><p>从上面commit我们知道，镜像是一层层定制，为了把整个定制层次透明，于是我们用脚本命令方式，把整个层次透明化，同时减少创建臃肿的镜像。而这个脚本文件，就是Dockerfile。</p>
<p>Dockerfile是一个文本文件,其内包含了一条条的指令(Instruction),每一条指令构建一层,<br>因此每一条指令的内容,就是描述该层应当如何构建。</p>
<h3 id="简单例子："><a href="#简单例子：" class="headerlink" title="简单例子："></a>简单例子：</h3><p>1.创建Dockerfile文件</p>
<pre><code>mutian@mutian-ThinkPad-T440p:~$ mkdir mynginx
mutian@mutian-ThinkPad-T440p:~$ cd mynginx/
mutian@mutian-ThinkPad-T440p:~/mynginx$ touch Dockerfile
</code></pre><p>2.打开Dockerfile文件，编辑如下内容：</p>
<pre><code>FROM nginx
RUN echo &apos;&lt;h1&gt;您好，我是Nginx！&lt;/h1&gt;&apos; &gt; /usr/share/nginx/html/index.html
</code></pre><p>3.构建镜像<br>进入Dockerfile所在目录，执行命令：</p>
<pre><code>mutian@mutian-ThinkPad-T440p:~/mynginx$ sudo docker build -t nginx:v3 .
Sending build context to Docker daemon  2.048kB
Step 1/2 : FROM nginx
 ---&gt; e548f1a579cf
Step 2/2 : RUN echo &apos;&lt;h1&gt;您好，我是Nginx！&lt;/h1&gt;&apos; &gt; /usr/share/nginx/html/index.html
 ---&gt; Running in d8c0149adf7e
Removing intermediate container d8c0149adf7e
 ---&gt; b92f375b41f0
Successfully built b92f375b41f0
Successfully tagged nginx:v3
</code></pre><p>4.查看</p>
<pre><code>mutian@mutian-ThinkPad-T440p:~/mynginx$ sudo docker image ls
REPOSITORY          TAG                 IMAGE ID            CREATED              SIZE
nginx               v3                  b92f375b41f0        About a minute ago   109MB
nginx               v2                  e8023c09eed5        17 hours ago         109MB
nginx               latest              e548f1a579cf        8 days ago           109MB
centos              latest              ff426288ea90        7 weeks ago          207MB
hello-world         latest              f2a91732366c        3 months ago    
</code></pre><p>我们看到，TAG为v3的镜像就是我们刚才构建。    </p>
<h3 id="FROM指定基础镜像"><a href="#FROM指定基础镜像" class="headerlink" title="FROM指定基础镜像"></a>FROM指定基础镜像</h3><p>定制镜像必须是以一个镜像为基础来构建，基础镜像是必须要指定的，而FROM命令就是指定基础镜像，且第一步就要指定。   </p>
<p>除了选择一些先前定制好的镜像作为基础镜像，Docker还存在一个特殊的镜像，名为<code>scratch</code>，表示空镜像，是个虚拟的概念，不实际存在。</p>
<pre><code>FROM    scratch
...
</code></pre><p>如果以<code>scratch</code>为基础，则意味着不以任何镜像为基础，后面所写的命令将作为镜像的第一层存在。</p>
<p>对于一些二进制的可执行文件，直接最为第一层存在，不依赖其它运行时系统支持，可以用空镜像。类似go语言编译的程序。</p>
<h3 id="RUN-执行命令"><a href="#RUN-执行命令" class="headerlink" title="RUN 执行命令"></a>RUN 执行命令</h3><p>RUN命令是用来执行命令行命令的，就像shell脚本一样，用来执行linux命令。</p>
<p>注意避免错误：</p>
<pre><code>FROM    debian:jessie
RUN    apt-get    update
RUN    apt-get    install    -y    gcc    libc6-dev    make
RUN    wget    -O    redis.tar.gz    &quot;http://download.redis.io/releases/redis-3.2.5.tar.gz&quot;
RUN    mkdir    -p    /usr/src/redis
RUN    tar    -xzf    redis.tar.gz    -C    /usr/src/redis    --strip-components=1
RUN    make    -C    /usr/src/redis
RUN    make    -C    /usr/src/redis    install
</code></pre><p>每一个指令都会创建一层，每层都会带有上层垃圾，因此一定要避免这样写。正确的写法如下： </p>
<pre><code>FROM    debian:jessie
RUN    buildDeps=&apos;gcc    libc6-dev    make&apos;    \
                &amp;&amp;    apt-get    update    \
                &amp;&amp;    apt-get    install    -y    $buildDeps    \
                &amp;&amp;    wget    -O    redis.tar.gz    &quot;http://download.redis.io/releases/redis-3.2.5.tar.gz&quot;    \
                &amp;&amp;    mkdir    -p    /usr/src/redis    \
                &amp;&amp;    tar    -xzf    redis.tar.gz    -C    /usr/src/redis    --strip-components=1    \
                &amp;&amp;    make    -C    /usr/src/redis    \
                &amp;&amp;    make    -C    /usr/src/redis    install    \
                &amp;&amp;    rm    -rf    /var/lib/apt/lists/*    \
                &amp;&amp;    rm    redis.tar.gz    \
                &amp;&amp;    rm    -r    /usr/src/redis    \
                &amp;&amp;    apt-get    purge    -y    --auto-remove    $buildDeps
</code></pre><p>用了<code>&amp;&amp;</code>，这和<code>shell</code>执行命令一样，就相当一个命令，所以算一层。执行完后，一定要记得删除不必要的垃圾数据，垃圾包。<br>在编写<code>Dockerfile</code>时候，一定要面向类似事件的思维，比如，安装redis环境，是一个事件，算一层。安装mysql，算一个事件，一层。  </p>
<h2 id="Dockerfile指令详解"><a href="#Dockerfile指令详解" class="headerlink" title="Dockerfile指令详解"></a>Dockerfile指令详解</h2><p>上面我们已经了解了<code>From</code>、<code>RUN</code>指令，下面我们来介绍其余的……</p>
<h3 id="COPY复制文件"><a href="#COPY复制文件" class="headerlink" title="COPY复制文件"></a>COPY复制文件</h3><p>格式：</p>
<ul>
<li><p><code>COPY    &lt;源路径&gt;...    &lt;目标路径&gt;</code></p>
</li>
<li><p><code>COPY    [&quot;&lt;源路径1&gt;&quot;,...    &quot;&lt;目标路径&gt;&quot;]</code></p>
</li>
</ul>
<p>源路径指当前电脑系统文件路径，目标路径指容器的文件路径。  </p>
<p><code>COPY</code>指令将从构建上下文目录中&lt;源路径&gt;的文件/目录复制到新的一层的镜像内的&lt;目标路<br>径&gt;位置。比如:  </p>
<pre><code>COPY    package.json    /usr/src/app/
</code></pre><p><code>&lt;源路径&gt;</code>可以是多个，甚至可以是通配符，只要满足<code>GO</code>的<a href="https://golang.org/pkg/path/filepath/#Match" target="_blank" rel="noopener">filepath.Match</a>规则，如： </p>
<pre><code>COPY    hom*    /mydir/
COPY    hom?.txt    /mydir/
</code></pre><p><code>&lt;目标路径&gt;</code> 可以是容器内的绝对路径，也可以是相对于工作目录的相对路径（工作目录可以用WORKDIR指令来指定）       </p>
<p><em>注意一点</em>： </p>
<p>使用    <code>COPY</code>指令,源文件的各种元数据都会保留。比如读、写、执行权限、文件变更时间等。</p>
<h3 id="ADD-更高级的复制文件"><a href="#ADD-更高级的复制文件" class="headerlink" title="ADD    更高级的复制文件"></a>ADD    更高级的复制文件</h3><p><code>ADD</code>指令和<code>COPY</code>指令本质上是一样的，只是添加了更多功能。 它的源文件可以是个url，也可以是tar，如果是tar还可以自动解压。  </p>
<p>但是，如果是url，下载下来后，还要新建一层解压，授权，因此不如用<code>COPY</code> ，然后用<code>wget</code>命令。  </p>
<p>在某个场景下，自动解压缩功能非常有用。 如： </p>
<pre><code>FROM    scratch
ADD    ubuntu-xenial-core-cloudimg-amd64-root.tar.gz    /
...
</code></pre><p>_注意_：  </p>
<p>在<code>COPY</code>    和<code>ADD</code>指令中选择的时候,可以遵循这样的原则,所有的文件复制均使用COPY指令,仅在需要自动解压缩的场合使用ADD。 </p>
<h3 id="CMD容器启动命令"><a href="#CMD容器启动命令" class="headerlink" title="CMD容器启动命令"></a>CMD容器启动命令</h3><p>也有两种格式：</p>
<ul>
<li><code>shell</code>格式：<code>CMD &lt;命令&gt;</code></li>
<li><code>exec</code>格式：<code>CMD    [&quot;可执行文件&quot;,    &quot;参数1&quot;,    &quot;参数2&quot;...]</code>    </li>
<li>参数列表格式:     <code>CMD    [&quot;参数1&quot;,    &quot;参数2&quot;...]</code>     。在指定了<code>ENTRYPOINT</code>指令后,用<code>CMD</code>指定具体的参数。</li>
</ul>
<p>在指令格式上，推荐<code>exec</code>格式。  </p>
<p>Docker不是虚拟机，只是一个进程。因此，在容器中启动程序，不要以后台形式启动，要以前台形式启动。<br>容器内没有后台概念。 </p>
<p>不要这样启动：</p>
<p><code>CMD service ginx start</code></p>
<p>直接启动可执行文件，并以前台形式启动：</p>
<p><code>CMD [&quot;nginx&quot;,&quot;-g&quot;,&quot;daemon off;&quot;]</code></p>
<h3 id="ENTRYPOINT入口点"><a href="#ENTRYPOINT入口点" class="headerlink" title="ENTRYPOINT入口点"></a>ENTRYPOINT入口点</h3><p>也分为：<code>exec</code>格式和<code>shell</code>格式</p>
<p>当指定了<code>ENTRYPOINT</code>后，就会把<code>CMD</code>的内容作为参数传给<code>ENTRYPOINT</code>指令，换句话说实际执行时，将变为：</p>
<pre><code>&lt;ENTRYPOINT&gt;    &quot;&lt;CMD&gt;&quot;
</code></pre><p><em>场景一</em>：<br>把镜像当成命令一样使用。</p>
<pre><code>FROM    ubuntu:16.04
RUN    apt-get    update    \
                &amp;&amp;    apt-get    install    -y    curl    \
                &amp;&amp;    rm    -rf    /var/lib/apt/lists/*
CMD    [    &quot;curl&quot;,    &quot;-s&quot;,    &quot;http://ip.cn&quot;    ]
</code></pre><p>执行：</p>
<pre><code>$    docker    run    myip
当前    IP:61.148.226.66    来自:北京市    联通    
</code></pre><p>再执行：</p>
<pre><code>$    docker    run    myip    -i
docker:    Error    response    from    daemon:    invalid    header    field    value    &quot;oci    runtime    error:    con
tainer_linux.go:247:    starting    container    process    caused    \&quot;exec:    \\\&quot;-i\\\&quot;:    executable    
file    not    found    in    $PATH\&quot;\n&quot;.
</code></pre><p>可以看到，报错了，因为<code>-i</code>不能参数不能传到<code>CMD</code>上去。</p>
<p>正确方式：</p>
<pre><code>FROM    ubuntu:16.04
RUN    apt-get    update    \
                &amp;&amp;    apt-get    install    -y    curl    \
                &amp;&amp;    rm    -rf    /var/lib/apt/lists/*
ENTRYPOINT    [    &quot;curl&quot;,    &quot;-s&quot;,    &quot;http://ip.cn&quot;    ]
</code></pre><p>执行：</p>
<pre><code>$    docker    run    myip
当前    IP:61.148.226.66    来自:北京市    联通

$    docker    run    myip    -i
HTTP/1.1    200    OK
Server:    nginx/1.8.0
Date:    Tue,    22    Nov    2016    05:12:40    GMT
Content-Type:    text/html;    charset=UTF-8
Vary:    Accept-Encoding
X-Powered-By:    PHP/5.6.24-1~dotdeb+7.1
X-Cache:    MISS    from    cache-2
X-Cache-Lookup:    MISS    from    cache-2:80
X-Cache:    MISS    from    proxy-2_6
Transfer-Encoding:    chunked
Via:    1.1    cache-2:80,    1.1    proxy-2_6:8006
Connection:    keep-alive
当前    IP:61.148.226.66    来自:北京市    联通
</code></pre><p>可以看到,这次成功了。这是因为当存在<code>ENTRYPOINT</code>后,<code>CMD</code>的内容将会作为参数传给<code>ENTRYPOINT</code>,而这里<code>-i</code>就是新的<code>CMD</code>,因此会作为参数传给<code>curl</code>,从而达到了我们预`期的效果。      </p>
<p><em>场景二</em>：</p>
<p>在应用程序启动前等做一些初始化工作。 </p>
<p>比如启动redis，不以<code>root</code>，而以<code>redis</code>用户身份启动。 </p>
<pre><code>FROM alpine:3.4
...
RUN addgroup -S    redis &amp;&amp; adduser -S -G redis redis
...
ENTRYPOINT [&quot;docker-entrypoint.sh&quot;]
EXPOSE    6379
CMD [&quot;redis-server&quot;]
</code></pre><p>可以看到其中为了<code>redis</code>服务创建了<code>redis</code>用户,并在最后指定了<code>ENTRYPOINT</code>为<code>docker-entrypoint.sh</code>脚本。   </p>
<pre><code>#!/bin/sh
...
#allow the container to be started with    `--user`
if [&quot;$1&quot; = &apos;redis-server&apos; -a &quot;$(id -u)&quot;    = &apos;0&apos;];    then
                chown -R redis    .
                exec su-exec redis &quot;$0&quot; &quot;$@&quot;
fi
exec &quot;$@&quot;
</code></pre><p>执行：</p>
<pre><code>$ docker run -it redis id
uid=0(root) gid=0(root) groups=0(root)
</code></pre><h3 id="ENV-设置环境变量"><a href="#ENV-设置环境变量" class="headerlink" title="ENV    设置环境变量"></a>ENV    设置环境变量</h3><p>格式有两种:</p>
<ul>
<li><code>ENV    &lt;key&gt;    &lt;value&gt;</code>    </li>
<li><code>ENV    &lt;key1&gt;=&lt;value1&gt;    &lt;key2&gt;=&lt;value2&gt;...</code>  </li>
</ul>
<p>如：</p>
<pre><code>ENV    VERSION=1.0    DEBUG=on \
    NAME=&quot;Happy    Feet&quot;   
</code></pre><p>这里展示了用法，还展示了换行，有空格的话用双引号。 </p>
<p>定义了变量，后面的命令中就可以使用了。可以使用它的命令如下一些： </p>
<pre><code>ADD     、     COPY     、     ENV     、     EXPOSE     、     LABEL     、     USER     、     WORKDIR     、     VOLUME     、     STOPSIGNAL     、     ONBU
ILD    
</code></pre><p>node官方Dockerfile例子：</p>
<pre><code>ENV    NODE_VERSION    7.2.0
RUN    curl    -SLO    &quot;https://nodejs.org/dist/v$NODE_VERSION/node-v$NODE_VERSION-linux-x64.ta
r.xz&quot;    \
        &amp;&amp;    curl    -SLO    &quot;https://nodejs.org/dist/v$NODE_VERSION/SHASUMS256.txt.asc&quot;    \
        &amp;&amp;    gpg    --batch    --decrypt    --output    SHASUMS256.txt    SHASUMS256.txt.asc    \
        &amp;&amp;    grep    &quot;    node-v$NODE_VERSION-linux-x64.tar.xz\$&quot;    SHASUMS256.txt    |    sha256sum    -c    -    \
        &amp;&amp;    tar    -xJf    &quot;node-v$NODE_VERSION-linux-x64.tar.xz&quot;    -C    /usr/local    --strip-components=
1    \
        &amp;&amp;    rm    &quot;node-v$NODE_VERSION-linux-x64.tar.xz&quot;    SHASUMS25    
</code></pre><p>可以看到，定义了变量，后面就可以不断重复引入使用。改变的时候，只需要改一个地方。同时可以创建不同的多个镜像。 </p>
<h3 id="ARG-构建参数"><a href="#ARG-构建参数" class="headerlink" title="ARG    构建参数"></a>ARG    构建参数</h3><p>构建参数和<code>ENV</code>的效果一样,都是设置环境变量。所不同的是,<code>ARG</code>所设置的构建环境的环境变量,在将来容器运行时是不会存在这些环境变量的。但是不要因此就使用<code>ARG</code>保存密码之类的信息,因为<code>docker    history</code>还是可以看到所有值的。 </p>
<h3 id="VOLUME-定义匿名卷"><a href="#VOLUME-定义匿名卷" class="headerlink" title="VOLUME    定义匿名卷"></a>VOLUME    定义匿名卷</h3><p>两种格式：</p>
<ul>
<li><code>VOLUME    [&quot;&lt;路径1&gt;&quot;,    &quot;&lt;路径2&gt;&quot;...]</code></li>
<li><code>VOLUME    &lt;路径&gt;</code></li>
</ul>
<p>不应该在容器存储层发生写操作。这样容器就能保持无状态的。对于动态数据，文件，我们应该保存到卷中。为了防止用户在运行时将动态文件写到存储层，<br>所以要预先指定动态文件写入的目录挂载为卷，如下： </p>
<pre><code>VOLUME    /data
</code></pre><p>这里，指定<code>/data</code>为匿名卷，任何写入该目录下的数据都不会写入到容器存储层。这样容器就是无状态的。可以运行时替换掉所挂载卷： </p>
<pre><code>docker    run    -d    -v    mydata:/data    xxxx
</code></pre><p>在这行命令中,就使用了<code>mydata</code>这个命名卷挂载到了<code>/data</code>这个位置,替代了<code>Dockerfile</code>中定义的匿名卷的挂载配置。  </p>
<h3 id="EXPOSE-声明端口"><a href="#EXPOSE-声明端口" class="headerlink" title="EXPOSE    声明端口"></a>EXPOSE    声明端口</h3><p>格式：<code>EXPOSE    &lt;端口1&gt;    [&lt;端口2&gt;...]</code>    </p>
<p><code>EXPOSE</code>指令是声明运行时容器提供服务端口,这只是一个声明,在运行时并不会因为这个声明应用就会开启这个端口的服务。   </p>
<p>要将<code>EXPOSE</code>和在运行时使用<code>-p    &lt;宿主端口&gt;:&lt;容器端口&gt;</code>区分开来。<code>-p</code>,是映射宿主端口和容器端口,换句话说,就是将容器的对应端口服务公开给外界访问,而<code>EXPOSE</code>仅仅是声明容器打算使用什么端口而已,并不会自动在宿主进行端口映射。</p>
<h3 id="WORKDIR指定工作目录"><a href="#WORKDIR指定工作目录" class="headerlink" title="WORKDIR指定工作目录"></a>WORKDIR指定工作目录</h3><p>格式：<code>WORKDIR    &lt;工作目录路径&gt;</code></p>
<p>该命令可以指定工作目录（当前目录），后面各层都使用该指定目录。该目录如果不存在，则会创建空目录。</p>
<p>写<code>Dockerfile</code>千万不能按照<code>shell</code>的思维写，应为<code>docker</code>是分层的。比如下面错误写法：</p>
<pre><code>RUN cd /app
RUN echo &quot;hello&quot; &gt; world.txt
</code></pre><p>构建后，你会发现找不到<code>/app/world.txt</code>文件。原因是：在<code>shell</code>中执行命令，是在同一进程中，操作的是同样的内存。但是在<code>docker</code>中不是。你知道，每一个<code>RUN</code>命令都是构建一层的，启动不同的容器。第一次<code>RUN</code>只是操作进入<code>/app</code>目录，没有操作任何文件变更，只是内存的变化而已，第二次启动了个新的容器，跟第一层的容器完全没关系了。<br>所以：在写<code>Dockerfile</code>到时候，一定要有分层的思维，每一个完整的操作要在同一层里面做。</p>
<p>如果要改变以后各层的工作目录都在指定的工作目录，那么<code>WORKDIR</code>指令就派上用场了。</p>
<h3 id="USER指定当前用户"><a href="#USER指定当前用户" class="headerlink" title="USER指定当前用户"></a><code>USER</code>指定当前用户</h3><p>格式:<code>USER &lt;用户名&gt;</code>  用户名系统已经添加好</p>
<p>和<code>WORKDIR</code>一样，都会影响后面的每一层。改变执行后面命令的执行身份。</p>
<p>下面建立用户，并切换到该用户，启动<code>redis</code>：</p>
<pre><code>RUN groupadd -r redis &amp;&amp; useradd -r -g redis edis
USER redis
RUN [&quot;redis-server&quot;]
</code></pre><p>如果以<code>root</code>执行脚本，在执行期间想切换用户，可以参考下面做法：</p>
<pre><code># 建立redis用户,并使用gosu换另一个用户执行命令
RUN groupadd -r redis &amp;&amp; useradd -r -g redis redis
#下载gosu
RUN wget -O /usr/local/bin/gosu &quot;https://github.com/tianon/gosu/releases/download/1.7/
gosu-amd64&quot; \
    &amp;&amp; chmod +x /usr/local/bin/gosu    \
        &amp;&amp; gosu nobody true
#设置CMD,并以另外的用户执行
CMD [&quot;exec&quot;,&quot;gosu&quot;,&quot;redis&quot;,&quot;redis-server&quot;]
</code></pre><p><code>gosu</code>使用更多信息参考：<a href="https://github.com/tianon/gosu" target="_blank" rel="noopener">https://github.com/tianon/gosu</a></p>
<h3 id="HEALTHCHECK-健康检查"><a href="#HEALTHCHECK-健康检查" class="headerlink" title="HEALTHCHECK 健康检查"></a>HEALTHCHECK 健康检查</h3><p>格式：</p>
<ul>
<li><code>HEALTHCHECK [选项] CMD &lt;命令&gt;</code>:设置检查容器健康状况的命令    </li>
<li><code>HEALTHCHECK NONE</code>:如果基础镜像有健康检查指令,使用这行可以屏蔽掉其健康检查指令。</li>
</ul>
<p>该指令是告诉<code>Docker</code>应该如何进行判断容器的状态是否正常。</p>
<h3 id="ONBUILD-为他人做嫁衣裳"><a href="#ONBUILD-为他人做嫁衣裳" class="headerlink" title="ONBUILD    为他人做嫁衣裳"></a>ONBUILD    为他人做嫁衣裳</h3><p>格式: <code>ONBUILD &lt;其它指令&gt;</code></p>
<p><code>ONBUILD</code> 后面的指令，在当前镜像构建的时候是不会执行的，只有以它所在的镜像为基础镜像的镜像在构建的时候才会执行。 </p>
<p><code>Docker</code>中其它的命令都是为了定制当前的镜像准备的，只有<code>ONBUILD</code>是为了他人而准备。   </p>
<p>所以，这里就可以看出，该指令可以用来做命令的继承。类似<code>maven</code>中的父<code>pom</code>。把<code>ONBUILD</code>后面的命令都看做各个子<code>Dockerfile</code>的共用命令。</p>
<pre><code>FROM node:slim
RUN mkdir /app
WORKDIR    /app
ONBUILD    COPY ./package.json /app
ONBUILD RUN [&quot;npm&quot;,    &quot;install&quot;]
ONBUILD    COPY . /app/
CMD [&quot;npm&quot;, &quot;start&quot;]
</code></pre><p> 后面每一个子<code>Dockerfile</code>只需要以上面镜像伟基础镜像:</p>
<pre><code>FROM my-node  
</code></pre><p>这样，<code>ONBUILD</code>后面的指令都会在每个子<code>Dockerfile</code>中执行。     </p>
<h2 id="删除本地镜像-1"><a href="#删除本地镜像-1" class="headerlink" title="删除本地镜像"></a>删除本地镜像</h2><p>可以使用命令<code>docker rmi</code>，格式：</p>
<pre><code>`docker    rmi    [选项]    &lt;镜像1&gt;    [&lt;镜像2&gt;    ...]`

_注意_: docker rm 命令是删除容器,不要混淆。
</code></pre><p>可以用ID、镜像名、摘要删除镜像：</p>
<pre><code>mutian@mutian-ThinkPad-T440p:~$ sudo docker images
[sudo] password for mutian: 
REPOSITORY           TAG                 IMAGE ID            CREATED             SIZE
mysql/mysql-server   latest              02d081b9c73e        2 months ago        300MB
nginx                v3                  b92f375b41f0        4 months ago        109MB
nginx                v2                  e8023c09eed5        4 months ago        109MB
nginx                latest              e548f1a579cf        4 months ago        109MB
centos               latest              ff426288ea90        5 months ago        207MB
hello-world          latest              f2a91732366c        7 months ago        1.85kB
season/fastdfs       latest              c6cc94c34f8e        2 years ago         205MB
</code></pre><ol>
<li>用短id删除，人工输入的时候使用，方便：</li>
</ol>
<p><code>$    docker    rmi    ff4</code></p>
<ol start="2">
<li>用长id，一般使用脚本的时候：</li>
</ol>
<p><code>$    docker    rmi    f2a91732366c</code></p>
<ol start="3">
<li>用镜像名,<code>&lt;仓库名&gt;:&lt;标签&gt;</code>：</li>
</ol>
<p><code>docker    rmi    nginx：v3</code></p>
<ol start="4">
<li>使用摘要，最精确： </li>
</ol>
<p>查看摘要：</p>
<pre><code>mutian@mutian-ThinkPad-T440p:~$ sudo docker images --digests
REPOSITORY           TAG                 DIGEST                                                                    IMAGE ID            CREATED             SIZE
mysql/mysql-server   latest              sha256:f1cb1e3f0124601b1496f485e9f4401ad10138294b5a38d932089daafd555e34   02d081b9c73e        2 months ago        300MB
nginx                v3                  &lt;none&gt;                                                                    b92f375b41f0        4 months ago        109MB
nginx                v2                  &lt;none&gt;                                                                    e8023c09eed5        4 months ago        109MB
nginx                latest              sha256:4771d09578c7c6a65299e110b3ee1c0a2592f5ea2618d23e4ffe7a4cab1ce5de   e548f1a579cf        4 months ago        109MB
centos               latest              sha256:6247c7082d4c86c61b00f7f2e3edbf7f072a24aa8edc28b5b68b3de3101bc1ce   ff426288ea90        5 months ago        207MB
hello-world          latest              sha256:083de497cff944f969d8499ab94f07134c50bcf5e6b9559b27182d3fa80ce3f7   f2a91732366c        7 months ago        1.85kB
season/fastdfs       latest              sha256:408acdebaa278e8ed875f7c63aa0c7ac8e633cf92f615d8295d279e137217003   c6cc94c34f8e        2 years ago         205MB
</code></pre><p>删除：</p>
<pre><code>docker rmi centos@sha256:6247c7082d4c86c61b00f7f2e3edbf7f072a24aa8edc28b5b68b3de3101bc1ce
</code></pre><h3 id="Untagged和Deleted"><a href="#Untagged和Deleted" class="headerlink" title="Untagged和Deleted"></a>Untagged和Deleted</h3><p>仔细观察，发现两种删除行为。</p>
<p>实际上，镜像都是一层层的，一个镜像有多个标签，只有每个标签都取消了，才有可能删除镜像。删除的时候从上最上层往下，逐步判断删除。 </p>
<h3 id="用docker-images命令来配合"><a href="#用docker-images命令来配合" class="headerlink" title="用docker images命令来配合"></a>用<code>docker images</code>命令来配合</h3><p>配合<code>docker    images    -q</code>，可以成批的删除你想要删除的镜像，可以指定你想要删除的镜像。</p>
<p>删除虚悬镜像：</p>
<p><code>$    docker    rmi    $(docker    images    -q    -f    dangling=true)</code></p>
<p>删除所有仓库名为redis的镜像:</p>
<p><code>$    docker    rmi    $(docker    images    -q    redis)</code></p>
<p>删除所有在mongo:3.2之前的镜像:</p>
<p><code>$    docker    rmi    $(docker    images    -q    -f    before=mongo:3.2)</code></p>
<h3 id="docker-image"><a href="#docker-image" class="headerlink" title="docker image"></a>docker image</h3><p>后面版本，推荐使用<code>docker image</code>来管理镜像。</p>
<p>如删除：</p>
<p><code>$    docker    image    rm</code></p>
<h2 id="基于本地模板导入导出镜像"><a href="#基于本地模板导入导出镜像" class="headerlink" title="基于本地模板导入导出镜像"></a>基于本地模板导入导出镜像</h2><h2 id="把镜像上传到docker公共仓库"><a href="#把镜像上传到docker公共仓库" class="headerlink" title="把镜像上传到docker公共仓库"></a>把镜像上传到docker公共仓库</h2><p><a href="https://hub.docker.com" target="_blank" rel="noopener">https://hub.docker.com</a></p>
<p>现在上面网址中注册：</p>
<img src="/2018/02/02/docker-lesson3-images/b-1.png">
<p>1.登录docker</p>
<pre><code>[root@xr-server-dev ~]# docker login 
Login with your Docker ID to push and pull images from Docker Hub. If you don&apos;t have a Docker ID, head over to https://hub.docker.com to create one.
Username: xinxiamu
Password: 
Login Succeeded
</code></pre><p>2.对本地自定义的docker镜像打标签，必须先打标签：</p>
<pre><code>[root@xr-server-dev ~]# docker tag fastdfs-server:v1 xinxiamu/fdfs-server:0.1
</code></pre><p>3.上传到hub.docker.com:</p>
<pre><code>[root@xr-server-dev ~]# docker push xinxiamu/fdfs-server:0.1
The push refers to repository [docker.io/xinxiamu/fdfs-server]
77f438662c4e: Pushed 
7051cce03d08: Pushed 
47262386cb42: Pushed 
89b5ef66bef1: Pushed 
6498ec7e0c6f: Pushed 
939591e6b702: Pushed 
d99d7b3f4b3f: Pushed 
e5f0ae3c8627: Pushed 
79332ca36cf7: Pushed 
d69483a6face: Pushed 
0.1: digest: sha256:811bc129bc6da0fe648e8dc4388dac39db592d86c14f4df87b2b70fc13b80fb5 size: 2403
</code></pre><p>刷新页面可以看到已经上传：</p>
<img src="/2018/02/02/docker-lesson3-images/b-2.png">        
<h2 id="把镜像上传到私服"><a href="#把镜像上传到私服" class="headerlink" title="把镜像上传到私服"></a>把镜像上传到私服</h2><p>后面章节有介绍……</p>
<h2 id="镜像的实现原理"><a href="#镜像的实现原理" class="headerlink" title="镜像的实现原理"></a>镜像的实现原理</h2><p><a href="https://en.wikipedia.org/wiki/UnionFS" target="_blank" rel="noopener">UnionFS</a></p>
<h2 id="配置镜像加速器"><a href="#配置镜像加速器" class="headerlink" title="配置镜像加速器"></a>配置镜像加速器</h2><p>注册阿里云账号后，即可在阿里云控制台（<a href="https://cr.console.aliyun.com/#/accelerator）看到类似如下的页面。" target="_blank" rel="noopener">https://cr.console.aliyun.com/#/accelerator）看到类似如下的页面。</a></p>
<img src="/2018/02/02/docker-lesson3-images/yy.png">
<p>按照上图说明配置即可。 </p>
</div><div class="tags"><a href="/tags/docker镜像/">docker镜像</a></div><div class="post-share"><div class="bdsharebuttonbox"><span style="float:left;line-height: 28px;height: 28px;font-size:16px;font-weight:blod">分享到：</span><a href="#" data-cmd="more" class="bds_more"></a><a href="#" data-cmd="mshare" title="分享到一键分享" class="bds_mshare"></a><a href="#" data-cmd="fbook" title="分享到Facebook" class="bds_fbook"></a><a href="#" data-cmd="twi" title="分享到Twitter" class="bds_twi"></a><a href="#" data-cmd="linkedin" title="分享到linkedin" class="bds_linkedin"></a><a href="#" data-cmd="youdao" title="分享到有道云笔记" class="bds_youdao"></a><a href="#" data-cmd="evernotecn" title="分享到印象笔记" class="bds_evernotecn"></a><a href="#" data-cmd="weixin" title="分享到微信" class="bds_weixin"></a><a href="#" data-cmd="qzone" title="分享到QQ空间" class="bds_qzone"></a><a href="#" data-cmd="tsina" title="分享到新浪微博" class="bds_tsina"></a></div></div><div class="post-nav"><a href="/2018/02/03/maven-ofen/" class="pre">maven使用经验记录</a><a href="/2018/02/02/docker-lesson2/" class="next">docker学习-第二课：发布一个web应用</a></div><div id="comments"></div></div></div></div><div class="layout-r"><div id="sidebar"><div class="search-pla"></div><div id="toc" class="widget"><div class="widget-title"><i class="fa fa-fei">文章目录</i></div><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#获取镜像"><span class="toc-text">获取镜像</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#运行"><span class="toc-text">运行</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#列出所有的镜像"><span class="toc-text">列出所有的镜像</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#删除本地镜像"><span class="toc-text">删除本地镜像</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#利用commit理解镜像构成"><span class="toc-text">利用commit理解镜像构成</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#使用Dockerfile定制镜像"><span class="toc-text">使用Dockerfile定制镜像</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#简单例子："><span class="toc-text">简单例子：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#FROM指定基础镜像"><span class="toc-text">FROM指定基础镜像</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#RUN-执行命令"><span class="toc-text">RUN 执行命令</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Dockerfile指令详解"><span class="toc-text">Dockerfile指令详解</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#COPY复制文件"><span class="toc-text">COPY复制文件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ADD-更高级的复制文件"><span class="toc-text">ADD    更高级的复制文件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#CMD容器启动命令"><span class="toc-text">CMD容器启动命令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ENTRYPOINT入口点"><span class="toc-text">ENTRYPOINT入口点</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ENV-设置环境变量"><span class="toc-text">ENV    设置环境变量</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ARG-构建参数"><span class="toc-text">ARG    构建参数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#VOLUME-定义匿名卷"><span class="toc-text">VOLUME    定义匿名卷</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#EXPOSE-声明端口"><span class="toc-text">EXPOSE    声明端口</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#WORKDIR指定工作目录"><span class="toc-text">WORKDIR指定工作目录</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#USER指定当前用户"><span class="toc-text">USER指定当前用户</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#HEALTHCHECK-健康检查"><span class="toc-text">HEALTHCHECK 健康检查</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ONBUILD-为他人做嫁衣裳"><span class="toc-text">ONBUILD    为他人做嫁衣裳</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#删除本地镜像-1"><span class="toc-text">删除本地镜像</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Untagged和Deleted"><span class="toc-text">Untagged和Deleted</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#用docker-images命令来配合"><span class="toc-text">用docker images命令来配合</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#docker-image"><span class="toc-text">docker image</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#基于本地模板导入导出镜像"><span class="toc-text">基于本地模板导入导出镜像</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#把镜像上传到docker公共仓库"><span class="toc-text">把镜像上传到docker公共仓库</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#把镜像上传到私服"><span class="toc-text">把镜像上传到私服</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#镜像的实现原理"><span class="toc-text">镜像的实现原理</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#配置镜像加速器"><span class="toc-text">配置镜像加速器</span></a></li></ol></div><div class="widget"><div class="widget-title"><i class="fa fa-xie"> 最新文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2020/12/28/ng2-pdfjs-viewer-start/">angular pdf 浏览插件ng2-pdfjs-viewer</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/12/28/github-issue/">github使用问题收集</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/12/28/mupdf/">MUPDF-一个pdf文件处理利器</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/10/19/kafka-start/">kafka入门</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/09/02/redmine-docker-install/">docker环境安装redmine</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/07/03/Hugo-Netlify-Forestry/">Hugo + Netlify +Forestry 发布hugo静态网站</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/06/29/hugo-start/">静态网站生成工具-Hugo</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/06/28/architecture-c4model/">可视化架构-c4介绍</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/06/18/minio-start/">分布式文件存储系统 MINIO入门</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/06/06/java-jni/">JAVA JNI入门</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-gui"> 分类</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/CentOs/">CentOs</a><span class="category-list-count">5</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Kubernetes/">Kubernetes</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Nginx/">Nginx</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Pivotal-Web-Service/">Pivotal Web Service</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/TypeScript/">TypeScript</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/angular/">angular</a><span class="category-list-count">8</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/api-manage/">api-manage</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/aws/">aws</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/docker/">docker</a><span class="category-list-count">18</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/flutter/">flutter</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/git/">git</a><span class="category-list-count">5</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/github/">github</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/gitlab/">gitlab</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/http协议/">http协议</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/hugo/">hugo</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/idea/">idea</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/java/">java</a><span class="category-list-count">7</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/java-io/">java-io</a><span class="category-list-count">7</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/java-jni/">java-jni</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/java-nio/">java-nio</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/javapoet/">javapoet</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/jpa-hibernate/">jpa/hibernate</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/json/">json</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/jvm/">jvm</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/jwt/">jwt</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/kafka/">kafka</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/linux/">linux</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/maven/">maven</a><span class="category-list-count">5</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/micro-service/">micro-service</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/mysql/">mysql</a><span class="category-list-count">5</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/nginx/">nginx</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/ngrok/">ngrok</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/npm/">npm</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/pdf/">pdf</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/rabbitmq/">rabbitmq</a><span class="category-list-count">5</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/redis/">redis</a><span class="category-list-count">7</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/redmine/">redmine</a><span class="category-list-count">5</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/rocketmq/">rocketmq</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/security/">security</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/servlet/">servlet</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/shadowsocks/">shadowsocks</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/shiro/">shiro</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/spring-boot/">spring-boot</a><span class="category-list-count">13</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/spring-cloud/">spring-cloud</a><span class="category-list-count">11</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/teamcity/">teamcity</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/ubuntu/">ubuntu</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/vagrant/">vagrant</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/zookeeper/">zookeeper</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/分布式系统/">分布式系统</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/区块链/">区块链</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/密码/">密码</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/持续集成/">持续集成</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/文件存储系统/">文件存储系统</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/服务网格/">服务网格</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/架构/">架构</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/监控/">监控</a><span class="category-list-count">2</span></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-biao"> 标签</i></div><div class="tagcloud"><a href="/tags/nginx负载均衡/" style="font-size: 15px;">nginx负载均衡</a> <a href="/tags/apidoc/" style="font-size: 15px;">apidoc</a> <a href="/tags/api-version-manage-spring-boot中API版本迭代管理/" style="font-size: 15px;">api-version-manage,spring-boot中API版本迭代管理</a> <a href="/tags/aws云服务器/" style="font-size: 15px;">aws云服务器</a> <a href="/tags/centos-jdk8-install/" style="font-size: 15px;">centos-jdk8-install</a> <a href="/tags/mysql-mysql8/" style="font-size: 15px;">mysql mysql8</a> <a href="/tags/centos登录/" style="font-size: 15px;">centos登录</a> <a href="/tags/concourse/" style="font-size: 15px;">concourse</a> <a href="/tags/snowflake算法/" style="font-size: 15px;">snowflake算法</a> <a href="/tags/cron-grammar/" style="font-size: 15px;">cron-grammar</a> <a href="/tags/centos-docker-install/" style="font-size: 15px;">centos-docker-install</a> <a href="/tags/docker镜像创建、docker容器启动、docker发布web应用/" style="font-size: 15px;">docker镜像创建、docker容器启动、docker发布web应用</a> <a href="/tags/docker-ce安装/" style="font-size: 15px;">docker ce安装</a> <a href="/tags/docker-容器/" style="font-size: 15px;">docker 容器</a> <a href="/tags/docker数据管理/" style="font-size: 15px;">docker数据管理</a> <a href="/tags/基础概念/" style="font-size: 15px;">基础概念</a> <a href="/tags/docker镜像/" style="font-size: 15px;">docker镜像</a> <a href="/tags/docker网络/" style="font-size: 15px;">docker网络</a> <a href="/tags/git分支、github分支/" style="font-size: 15px;">git分支、github分支</a> <a href="/tags/git-server-build/" style="font-size: 15px;">git-server-build</a> <a href="/tags/git-tag/" style="font-size: 15px;">git-tag</a> <a href="/tags/git-install-in-centos/" style="font-size: 15px;">git-install-in-centos</a> <a href="/tags/hashicorp-vault/" style="font-size: 15px;">hashicorp-vault</a> <a href="/tags/http-overview/" style="font-size: 15px;">http-overview</a> <a href="/tags/jackson/" style="font-size: 15px;">jackson</a> <a href="/tags/istio/" style="font-size: 15px;">istio</a> <a href="/tags/git问题/" style="font-size: 15px;">git问题</a> <a href="/tags/hibernate-relation/" style="font-size: 15px;">hibernate-relation</a> <a href="/tags/cglib/" style="font-size: 15px;">cglib</a> <a href="/tags/gc垃圾回收/" style="font-size: 15px;">gc垃圾回收</a> <a href="/tags/javapoet-apt-annotation/" style="font-size: 15px;">javapoet-apt-annotation</a> <a href="/tags/jvm监控工具/" style="font-size: 15px;">jvm监控工具</a> <a href="/tags/k8s/" style="font-size: 15px;">k8s</a> <a href="/tags/jenkins-java-maven/" style="font-size: 15px;">jenkins-java-maven</a> <a href="/tags/maven常用功能/" style="font-size: 15px;">maven常用功能</a> <a href="/tags/linux-command/" style="font-size: 15px;">linux-command</a> <a href="/tags/ubuntu-navicat/" style="font-size: 15px;">ubuntu-navicat</a> <a href="/tags/微服务实践总结/" style="font-size: 15px;">微服务实践总结</a> <a href="/tags/mysql一主多从配置/" style="font-size: 15px;">mysql一主多从配置</a> <a href="/tags/maven-error/" style="font-size: 15px;">maven-error</a> <a href="/tags/mysql建表规范/" style="font-size: 15px;">mysql建表规范</a> <a href="/tags/mysql-expain/" style="font-size: 15px;">mysql-expain</a> <a href="/tags/mysql使用问题收藏/" style="font-size: 15px;">mysql使用问题收藏</a> <a href="/tags/ngrok使用/" style="font-size: 15px;">ngrok使用</a> <a href="/tags/npm使用问题/" style="font-size: 15px;">npm使用问题</a> <a href="/tags/pws-push/" style="font-size: 15px;">pws-push</a> <a href="/tags/rabbitmq-install/" style="font-size: 15px;">rabbitmq-install</a> <a href="/tags/redis命令/" style="font-size: 15px;">redis命令</a> <a href="/tags/redis-密码-安全/" style="font-size: 15px;">redis,密码,安全</a> <a href="/tags/redis-主从-集群/" style="font-size: 15px;">redis,主从,集群</a> <a href="/tags/redis分布式锁/" style="font-size: 15px;">redis分布式锁</a> <a href="/tags/redis发布订阅/" style="font-size: 15px;">redis发布订阅</a> <a href="/tags/redis哨兵模式/" style="font-size: 15px;">redis哨兵模式</a> <a href="/tags/nginx能做什么/" style="font-size: 15px;">nginx能做什么</a> <a href="/tags/redis-install/" style="font-size: 15px;">redis-install</a> <a href="/tags/redmine-mongrel-nginx/" style="font-size: 15px;">redmine-mongrel-nginx</a> <a href="/tags/redmine插件/" style="font-size: 15px;">redmine插件</a> <a href="/tags/rocketmq入门/" style="font-size: 15px;">rocketmq入门</a> <a href="/tags/change-contextpath-way/" style="font-size: 15px;">change-contextpath-way</a> <a href="/tags/restful-api/" style="font-size: 15px;">restful-api</a> <a href="/tags/spring-cloud-配置中心加解密/" style="font-size: 15px;">spring-cloud(配置中心加解密)</a> <a href="/tags/feign使用常见问题/" style="font-size: 15px;">feign使用常见问题</a> <a href="/tags/feign/" style="font-size: 15px;">feign</a> <a href="/tags/hystrix/" style="font-size: 15px;">hystrix</a> <a href="/tags/hystrix-dashboard/" style="font-size: 15px;">hystrix,dashboard</a> <a href="/tags/zuul-exception/" style="font-size: 15px;">zuul-exception</a> <a href="/tags/zuul-filters/" style="font-size: 15px;">zuul-filters</a> <a href="/tags/ELK/" style="font-size: 15px;">ELK</a> <a href="/tags/zuul-start/" style="font-size: 15px;">zuul-start</a> <a href="/tags/spinnaker-start/" style="font-size: 15px;">spinnaker-start</a> <a href="/tags/shadowsocks-go/" style="font-size: 15px;">shadowsocks-go</a> <a href="/tags/spring-cache/" style="font-size: 15px;">spring cache</a> <a href="/tags/shiro入门/" style="font-size: 15px;">shiro入门</a> <a href="/tags/spring-cors/" style="font-size: 15px;">spring-cors</a> <a href="/tags/spring-boot-async/" style="font-size: 15px;">spring-boot-async</a> <a href="/tags/spring-boot-jar/" style="font-size: 15px;">spring-boot-jar</a> <a href="/tags/spring-mvc国际化/" style="font-size: 15px;">spring mvc国际化</a> <a href="/tags/teamcity-start/" style="font-size: 15px;">teamcity-start</a> <a href="/tags/spring-boot-filter/" style="font-size: 15px;">spring-boot-filter</a> <a href="/tags/jpa读写分离配置/" style="font-size: 15px;">jpa读写分离配置</a> <a href="/tags/wkhtmltopdf/" style="font-size: 15px;">wkhtmltopdf</a> <a href="/tags/apache-curator/" style="font-size: 15px;">apache curator</a> <a href="/tags/website-high-performance/" style="font-size: 15px;">website-high-performance</a> <a href="/tags/vault/" style="font-size: 15px;">vault</a> <a href="/tags/vagrant-start/" style="font-size: 15px;">vagrant-start</a> <a href="/tags/后端架构师技术图谱/" style="font-size: 15px;">后端架构师技术图谱</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-archive"> 归档</i></div><ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/12/">十二月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/10/">十月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/09/">九月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/07/">七月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/06/">六月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/05/">五月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/04/">四月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/12/">十二月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/11/">十一月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/10/">十月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/09/">九月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/08/">八月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/05/">五月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/04/">四月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/03/">三月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/02/">二月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/01/">一月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/12/">十二月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/11/">十一月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/10/">十月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/09/">九月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/08/">八月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/07/">七月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/06/">六月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/05/">五月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/04/">四月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/03/">三月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/02/">二月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/01/">一月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/12/">十二月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/11/">十一月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/10/">十月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/09/">九月 2017</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-you"> 友情链接</i></div><ul></ul><a href="http://blog.didispace.com/" title="程序员DD|翟永超的博客" target="_blank">程序员DD|翟永超的博客</a><ul></ul><a href="http://www.bysocket.com/" title="泥瓦匠的博客" target="_blank">泥瓦匠的博客</a><ul></ul><a href="http://itmuch.com/" title="周立|Spring Cloud的博客" target="_blank">周立|Spring Cloud的博客</a><ul></ul><a href="http://itmuch.com/" title="梁桂钊的博客" target="_blank">梁桂钊的博客</a><ul></ul><a href="https://www.cnkirito.moe/" title="徐靖峰|个人博客" target="_blank">徐靖峰|个人博客</a><ul></ul><a href="http://www.ityouknow.com/" title="纯洁的微笑的博客" target="_blank">纯洁的微笑的博客</a><ul></ul><a href="https://crossoverjie.top/" title="crossoverJie blog" target="_blank">crossoverJie blog</a><ul></ul><a href="https://my.oschina.net/u/1859679/blog" title="wier的博客" target="_blank">wier的博客</a><ul></ul><a href="http://www.ictgu.cn/" title="Any-Video" target="_blank">Any-Video</a><ul></ul><a href="https://www.processon.com/" title="在线作图" target="_blank">在线作图</a><ul></ul><a href="http://spring4all.com/" title="spring4all" target="_blank">spring4all</a><ul></ul><a href="https://www.oschina.net/" title="开源中国" target="_blank">开源中国</a><ul></ul><a href="https://www.w3school.com.cn/" title="w3school学习网" target="_blank">w3school学习网</a><ul></ul><a href="https://angular.cn/" title="angular中文教程" target="_blank">angular中文教程</a><ul></ul><a href="http://tutorials.jenkov.com" title="java教程" target="_blank">java教程</a><ul></ul><a href="http://javasampleapproach.com/" title="javasampleapproach-java教程" target="_blank">javasampleapproach-java教程</a><ul></ul><a href="https://www.programcreek.com/" title="programcreek-java教程" target="_blank">programcreek-java教程</a><ul></ul><a href="https://howtodoinjava.com/" title="howtodoinjava" target="_blank">howtodoinjava</a><ul></ul><a href="http://docs.oracle.com/javase/9/docs/api/" title="javadoc(8/9)" target="_blank">javadoc(8/9)</a><ul></ul><a href="https://docs.oracle.com/javase/tutorial/essential/io/" title="java-core/io" target="_blank">java-core/io</a><ul></ul><a href="https://github.com/eugenp/tutorials" title="eugenp/tutorials" target="_blank">eugenp/tutorials</a><ul></ul><a href="http://www.markdown.cn/" title="markdown参考" target="_blank">markdown参考</a><ul></ul><a href="https://www.baeldung.com/" title="spring教程baeldung" target="_blank">spring教程baeldung</a><ul></ul><a href="https://createchance.github.io/" title="java并发编程" target="_blank">java并发编程</a><ul></ul><a href="http://ifeve.com/" title="并发编程" target="_blank">并发编程</a><ul></ul><a href="http://tutorials.jenkov.com/java-io/index.html" title="Java IO Tutorial" target="_blank">Java IO Tutorial</a><ul></ul><a href="http://tutorials.jenkov.com/java-nio/index.html" title="Java NIO Tutorial" target="_blank">Java NIO Tutorial</a><ul></ul><a href="https://tonybai.com/articles/" title="tonybai-golang" target="_blank">tonybai-golang</a></div></div></div></div><a id="totop" href="#top"></a><div id="footer"><div class="footer-info"><p><a href="/baidusitemap.xml">Baidu Site Haritası</a> |  <a href="/atom.xml">订阅</a> |  <a href="/about/">关于</a></p><p>本站总访问量：<i id="busuanzi_container_site_pv"><i id="busuanzi_value_site_pv"></i></i>次</p><p><span> Copyright &copy;<a href="/." rel="nofollow">xinxiamu.</a></span><span> Theme by<a rel="nofollow" target="_blank" href="https://github.com/chaooo/hexo-theme-BlueLake"> BlueLake.</a></span><span> Count by<a href="http://busuanzi.ibruce.info/"> busuanzi.</a></span><span> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a></span></p></div></div></div><script src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" async></script><script type="text/javascript" src="/js/search.json.js?v=2.0.1"></script><script type="text/javascript" src="/js/toctotop.js?v=2.0.1" async></script><script>window._bd_share_config={"common":{"bdSnsKey":{},"bdText":"","bdMini":"2","bdMiniList":["mshare","weixin","tsina","qzone","linkedin","fbook","twi","print","renren","sqq","evernotecn","bdysc","tqq","tqf","bdxc","kaixin001","tieba","douban","bdhome","thx","ibaidu","meilishuo","mogujie","diandian","huaban","duitang","hx","fx","youdao","sdo","qingbiji","people","xinhua","mail","isohu","yaolan","wealink","ty","iguba","h163","copy"],"bdPic":"","bdStyle":"1","bdSize":"16"},"share":{},"image":{"viewList":["tsina","qzone","weixin","fbook","twi","linkedin","youdao","evernotecn","mshare"],"viewText":"分享到：","viewSize":"16"},"selectShare":{"bdContainerClass":null,"bdSelectMiniList":["tsina","qzone","weixin","fbook","twi","linkedin","youdao","evernotecn","mshare"]}};with(document)0[(getElementsByTagName('head')[0]||head).appendChild(createElement('script')).src='http://bdimg.share.baidu.com/static/api/js/share.js?v=89860593.js?cdnversion='+~(-new Date()/36e5)];
</script></body></html>